(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{349:function(a,s,t){"use strict";t.r(s);var e=t(40),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"实例方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例方法"}},[a._v("#")]),a._v(" 实例方法")]),a._v(" "),t("p",[a._v("const Qilin = new qilin()")]),a._v(" "),t("h2",{attrs:{id:"addmodule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#addmodule"}},[a._v("#")]),a._v(" addModule")]),a._v(" "),t("p",[a._v("添加 modules")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Qilin.addModule({\n  name: 'tests',\n  state: {\n    list: []\n  },\n  actions: {},\n  mutations: {\n    update: (state, { payload: { list } }) => (state.list = list)\n  },\n  sagas: {\n    *fetch({ call, put, actions: { update } }, { payload: { page } }) {\n      try {\n        const { data } = yield call(fetchPost, { page })\n        yield put(\n          update({\n            list: data\n          })\n        )\n      } catch (err) {\n        console.log(err)\n      }\n    }\n  }\n})\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("h3",{attrs:{id:"name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[a._v("#")]),a._v(" "),t("code",[a._v("name")])]),a._v(" "),t("p",[a._v("命名空间")]),a._v(" "),t("h3",{attrs:{id:"state"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[a._v("#")]),a._v(" "),t("code",[a._v("state")])]),a._v(" "),t("p",[a._v("state 初始值")]),a._v(" "),t("h3",{attrs:{id:"actions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#actions"}},[a._v("#")]),a._v(" "),t("code",[a._v("actions")])]),a._v(" "),t("p",[a._v("可选, 默认为空")]),a._v(" "),t("h3",{attrs:{id:"mutations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mutations"}},[a._v("#")]),a._v(" "),t("code",[a._v("mutations")])]),a._v(" "),t("p",[a._v("key 为 action 收集值, value 为 recuder 处理 function, 由于内置 immer, 写法直接赋值既可")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("update: (state, { payload: { list } }) => (state.list = list)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"sagas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sagas"}},[a._v("#")]),a._v(" "),t("code",[a._v("sagas")])]),a._v(" "),t("p",[a._v("key 为 action 收集值, value 为对应的 saga 函数, Qilin 自动 watch, 类型暂时只有 takeEvery")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("fetch({ call, put, actions: { update } }, { payload: { page } }) {\n  try {\n    const { data } = yield call(fetchPost, { page })\n    yield put(\n      update({\n        list: data\n      })\n    )\n  } catch (err) {\n    console.log(err)\n  }\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("p",[a._v("参数值 call, put 为 redux-saga 原有方法, actions 格式为")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("{\n  // 当前module下的action\n  update,\n  moduleName:{\n    key,\n    ....\n  }\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("p",[a._v("所以 put(action)即可触发相应 action")]),a._v(" "),t("h2",{attrs:{id:"createstore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#createstore"}},[a._v("#")]),a._v(" createStore")]),a._v(" "),t("p",[a._v("生成 store")]),a._v(" "),t("h2",{attrs:{id:"mapdispatchtoprops"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mapdispatchtoprops"}},[a._v("#")]),a._v(" mapDispatchToProps")]),a._v(" "),t("p",[a._v("提供给 connect 的第二个参数, 包含每个模块下的 actions")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("export default connect(mapStateToProps, Qilin.mapDispatchToProps)(TestsComponent)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"getaction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getaction"}},[a._v("#")]),a._v(" getAction")]),a._v(" "),t("p",[a._v("获取对应模块下的 actions, 参数为 module.name")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("const postAction = Qilin.getAction('posts')\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"bindactioncreators"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bindactioncreators"}},[a._v("#")]),a._v(" bindActionCreators")]),a._v(" "),t("p",[a._v("redux bindActionCreators 方法")]),a._v(" "),t("h2",{attrs:{id:"produce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#produce"}},[a._v("#")]),a._v(" produce")]),a._v(" "),t("p",[a._v("immer produce 方法")])])}),[],!1,null,null,null);s.default=n.exports}}]);